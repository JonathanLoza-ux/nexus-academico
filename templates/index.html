<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Académico 2.0</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

    <div class="app-container">
        
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="brand-container">
                    <i class="fas fa-brain logo-icon"></i>
                    <h2>NEXUS</h2>
                </div>

                <button class="theme-btn-header" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i>
                </button>
            </div>

            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="subject-search" placeholder="Buscar materia..." onkeyup="filtrarMaterias()">
            </div>

            <div class="subject-list" id="subject-list">
                <p class="section-title">MATERIAS</p>
                
                <button class="nav-btn" onclick="seleccionarMateria('Matemáticas')">
                    <i class="fas fa-calculator"></i> Matemáticas
                </button>
                <button class="nav-btn" onclick="seleccionarMateria('Historia')">
                    <i class="fas fa-landmark"></i> Historia
                </button>
                <button class="nav-btn" onclick="seleccionarMateria('Ciencias')">
                    <i class="fas fa-flask"></i> Ciencias
                </button>
                <button class="nav-btn" onclick="seleccionarMateria('Lenguaje')">
                    <i class="fas fa-book-open"></i> Lenguaje
                </button>
                <button class="nav-btn" onclick="seleccionarMateria('Inglés')">
                    <i class="fas fa-language"></i> Inglés
                </button>
                <button class="nav-btn" onclick="seleccionarMateria('Programación')">
                    <i class="fas fa-code"></i> Programación
                </button>
            </div>
        </aside>

        <main class="chat-area">
            <header class="chat-header">
            <button id="menu-btn" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            
            <h3>Asistente Virtual</h3>
            
            <div class="user-profile-icon">
                <i class="fas fa-user-circle" style="font-size: 1.8rem; color: var(--accent);"></i>
            </div>
        </header>

            <div id="chat-box">
                <div class="message bot-msg">
                    <div class="msg-content">
                        ¡Hola! Soy <strong>Nexus</strong>. Selecciona una materia del menú lateral para comenzar.
                    </div>
                </div>
            </div>

            <div id="loading-indicator" class="hidden">
                <i class="fas fa-circle-notch fa-spin"></i> Nexus está pensando...
            </div>

            <div id="image-preview-container" class="hidden">
                <div class="preview-wrapper">
                    <img id="image-preview" src="" alt="Vista previa">
                    <button onclick="quitarImagen()" class="close-preview-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <div id="input-area">
                <input type="file" id="image-input" accept="image/*" style="display: none;" onchange="mostrarVistaPrevia()">
                
                <button class="attach-btn" onclick="document.getElementById('image-input').click()">
                    <i class="fas fa-paperclip"></i>
                </button>

                <input type="text" id="user-input" placeholder="Escribe o sube una foto...">
                
                <button onclick="enviarMensaje()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </main>

        <div id="overlay" onclick="toggleSidebar()"></div>
        
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>